(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{108:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n(0),c=n.n(a),i=n(22),s=n.n(i),u=n(11),o=n(73),l=n(10),d=n(13),j=n(21),b=n(68),f=n.n(b),p=n(12),g=n(50),h=Object(o.a)(Object(l.d)({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})),O={key:"auth",storage:f.a,whitelist:["token"]},x=Object(d.c)({auth:Object(j.g)(O,p.b),contacts:g.b}),v=Object(l.a)({reducer:x,devtools:!1,middleware:h}),L=Object(j.h)(v),I=n(33),m=n(69),k=n(7),C=n(30),y=n(44);function w(t){var e=t.children,n=Object(y.a)(t,["children"]),a=Object(u.c)(p.c.getIsLogIn);return Object(r.jsx)(k.b,Object(C.a)(Object(C.a)({},n),{},{children:a?e:Object(r.jsx)(k.a,{to:"/login"})}))}function R(t){var e=t.children,n=t.restricted,a=void 0!==n&&n,c=t.redirectTo,i=void 0===c?"/":c,s=Object(y.a)(t,["children","restricted","redirectTo"]),o=Object(u.c)(p.c.getIsLogIn);return Object(r.jsx)(k.b,Object(C.a)(Object(C.a)({},s),{},{children:o&&a?Object(r.jsx)(k.a,{to:i}):e}))}var W=n(17),A=function(){var t=Object(u.c)(p.c.getIsLogIn);return Object(r.jsxs)(W.a,{variant:"tabs",children:[Object(r.jsx)(W.a.Item,{children:Object(r.jsx)(W.a.Link,{href:"/",exact:"true",children:"HOME"})}),t&&Object(r.jsx)(W.a.Item,{children:Object(r.jsx)(W.a.Link,{href:"/contacts",exact:"true",children:"MY CONTACTS"})})]})},U=n(46),S={container:{display:"flex",alignItems:"center"},name:{fontSize:"1.2em",fontWeight:700,marginRight:15}};function V(){var t=Object(u.b)(),e=Object(u.c)(p.c.getUsername);return Object(r.jsxs)("div",{style:S.container,children:[Object(r.jsxs)("span",{style:S.name,children:["Welcome, ",e]}),Object(r.jsx)(U.a,{variant:"danger",type:"button",onClick:function(){return t(p.a.logOut())},children:"\u0412\u044b\u0439\u0442\u0438"})]})}function z(){return Object(r.jsxs)(W.a,{variant:"tabs",children:[Object(r.jsx)(W.a.Item,{children:Object(r.jsx)(W.a.Link,{href:"/register",exact:"true",children:"REGISTRATION"})}),Object(r.jsx)(W.a.Item,{children:Object(r.jsx)(W.a.Link,{href:"/login",exact:"true",children:"LOG IN"})})]})}var T=n(72);function E(){var t=Object(u.c)(p.c.getIsLogIn),e=Object(u.c)(p.c.getIsRefreshing);return Object(r.jsxs)(T.a,{collapseOnSelect:!0,variant:"primary",bg:"light",expand:"true",children:[Object(r.jsx)(A,{}),t&&!e?Object(r.jsx)(V,{}):Object(r.jsx)(z,{})]})}var M=n(70),N=n(71),B=Object(a.lazy)((function(){return n.e(7).then(n.bind(null,115))})),G=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,116))})),J=Object(a.lazy)((function(){return n.e(5).then(n.bind(null,117))})),F=Object(a.lazy)((function(){return Promise.all([n.e(3),n.e(6)]).then(n.bind(null,118))}));var H=function(){var t=Object(u.b)(),e=Object(u.c)(p.c.getIsRefreshing);return Object(a.useEffect)((function(){t(p.a.refreshCurrentUser())}),[t]),Object(r.jsxs)(M.a,{children:[Object(r.jsx)(E,{}),!e&&Object(r.jsx)(k.d,{children:Object(r.jsxs)(a.Suspense,{fallback:Object(r.jsx)(N.a,{animation:"border",variant:"primary",role:"status"}),children:[Object(r.jsx)(R,{exact:!0,path:"/",children:Object(r.jsx)(B,{})}),Object(r.jsx)(R,{exact:!0,restricted:!0,path:"/register",children:Object(r.jsx)(J,{})}),Object(r.jsx)(R,{exact:!0,restricted:!0,redirectTo:"/contacts",path:"/login",children:Object(r.jsx)(G,{})}),Object(r.jsx)(w,{path:"/contacts",children:Object(r.jsx)(F,{})})]})})]})};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(u.a,{store:v,children:Object(r.jsx)(m.a,{loading:null,persistor:L,children:Object(r.jsx)(I.a,{children:Object(r.jsx)(H,{})})})})}),document.getElementById("root"))},12:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return O}));var r=n(8),a=n.n(r),c=n(19),i=n(14),s=n.n(i),u=n(10);s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var o,l=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},d=function(){s.a.defaults.headers.common.Authorization=""},j=Object(u.b)("auth/register",function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/users/signup",e);case 4:return c=t.sent,i=c.data,l(i.token),t.abrupt("return",i);case 10:t.prev=10,t.t0=t.catch(1),r(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),b=Object(u.b)("user/login",function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/users/login",e);case 4:return c=t.sent,i=c.data,l(i.token),t.abrupt("return",i);case 10:t.prev=10,t.t0=t.catch(1),r(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),f={register:j,logOut:Object(u.b)("users/logout",function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/users/logout");case 4:d(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:b,refreshCurrentUser:Object(u.b)("users/refresh",function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return l(c),t.prev=5,t.next=8,s.a.get("/users/current");case 8:return i=t.sent,u=i.data,t.abrupt("return",u);case 13:t.prev=13,t.t0=t.catch(5),n.rejectWithValue(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},p={getIsLogIn:function(t){return t.auth.isLogIn},getUsername:function(t){return t.auth.user.name},getIsRefreshing:function(t){return t.auth.isRefreshing}},g=n(5),h={user:{name:null,email:null},token:null,isLogIn:!1,isRefreshing:!1},O=Object(u.c)({name:"auth",initialState:h,extraReducers:(o={},Object(g.a)(o,f.register.pending,(function(t){t.isLogIn=h.isLogIn})),Object(g.a)(o,f.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLogIn=!h.isLogIn})),Object(g.a)(o,f.register.rejected,(function(t){t.isLogIn=h.isLogIn})),Object(g.a)(o,f.logIn.pending,(function(t){t.isLogIn=h.isLogIn})),Object(g.a)(o,f.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLogIn=!h.isLogIn})),Object(g.a)(o,f.logIn.rejected,(function(t){t.isLogIn=h.isLogIn})),Object(g.a)(o,f.logOut.pending,(function(t){t.isLogIn=!h.isLogIn})),Object(g.a)(o,f.logOut.fulfilled,(function(t){t.user=h.user,t.token=h.token,t.isLogIn=h.isLogIn})),Object(g.a)(o,f.logOut.rejected,(function(t){t.isLogIn=!h.isLogIn})),Object(g.a)(o,f.refreshCurrentUser.pending,(function(t){t.isLogIn=h.isLogIn,t.isRefreshing=!h.isRefreshing})),Object(g.a)(o,f.refreshCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLogIn=!h.isLogIn,t.isRefreshing=h.isRefreshing})),Object(g.a)(o,f.refreshCurrentUser.rejected,(function(t){t.isLogIn=h.isLogIn,t.isRefreshing=h.isRefreshing})),o)}).reducer},50:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return f}));var r=n(8),a=n.n(r),c=n(19),i=n(14),s=n.n(i),u=n(10);s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var o,l={getAllContacts:Object(u.b)("contacts/getAllContacts",function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.get("/contacts");case 4:return c=t.sent,i=c.data,t.abrupt("return",i);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),addContact:Object(u.b)("contacts/addContact",function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/contacts",e);case 4:return c=t.sent,i=c.data,t.abrupt("return",i);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),deleteContact:Object(u.b)("contacts/deleteContact",function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.delete("/contacts/".concat(e));case 4:return t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),updateContact:Object(u.b)("contacts/update",function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c,i,u,o,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.idForUpdate,c=e.credentials,i=n.rejectWithValue,t.prev=2,u=r,t.next=6,s.a.patch("/contacts/".concat(u),c);case 6:return o=t.sent,l=o.data,t.abrupt("return",l);case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",i(t.t0));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,n){return t.apply(this,arguments)}}())},d={getAllContacts:function(t){return t.contacts.allContacts}},j=n(5),b={allContacts:[],isLoading:!1,error:null},f=Object(u.c)({name:"contacts",initialState:b,extraReducers:(o={},Object(j.a)(o,l.getAllContacts.pending,(function(t){t.isLoading=!b.isLoading})),Object(j.a)(o,l.getAllContacts.fulfilled,(function(t,e){t.allContacts=e.payload,t.isLoading=b.isLoading})),Object(j.a)(o,l.addContact.pending,(function(t){t.isLoading=!b.isLoading})),Object(j.a)(o,l.addContact.fulfilled,(function(t,e){t.allContacts.push(e.payload),t.isLoading=b.isLoading})),Object(j.a)(o,l.deleteContact.pending,(function(t){t.isLoading=!b.isLoading})),Object(j.a)(o,l.deleteContact.fulfilled,(function(t,e){var n=t.allContacts.filter((function(t){return t.id!==e.payload}));t.allContacts=n,t.isLoading=b.isLoading})),Object(j.a)(o,l.updateContact.pending,(function(t){t.isLoading=!b.isLoading})),Object(j.a)(o,l.updateContact.fulfilled,(function(t,e){var n=t.allContacts.map((function(t){return function(t,e){return t.id===e.id?e:t}(t,e.payload)}));t.allContacts=n,t.isLoading=b.isLoading})),o)}).reducer}},[[108,1,2]]]);
//# sourceMappingURL=main.f6c8cc68.chunk.js.map